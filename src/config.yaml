auto_tasks:
  # lint general blacklists and build all
  # -- should aggregate first
  default:
    - action: lint
      kwargs:
        files:
          - src/blocklist/
        auto_fix: true
    - action: uniquify
      kwargs:
        files:
          - src/blocklist/not-content-farms.txt
        auto_fix: true
    - action: uniquify
      kwargs: &exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/content-farms.txt
        auto_fix_excludes:
          - src/blocklist/not-content-farms.txt
        cross_files: true
        auto_fix: true
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/content-farms.txt
          - src/blocklist/nearly-content-farms.txt
        auto_fix_excludes:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/content-farms.txt
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/extra-content-farms.txt
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/bad-cloners.txt

    # probe for entries listed in the dead list
    - action: uniquify
      kwargs:
        files:
          - src/blocklist/content-farms.txt
          - src/blocklist/content-farms-inactive.txt
        auto_fix_excludes:
          - src/blocklist/content-farms.txt
        check_subdomains: true
        cross_files: true
        auto_fix: true

    - action: build

  # lint all general blacklists
  lint:
    - action: lint
      kwargs:
        files:
          - src/blocklist/
        auto_fix: true

  # uniquify all general blacklists
  uniquify:
    - action: uniquify
      kwargs:
        files:
          - src/blocklist/not-content-farms.txt
        check_subdomains: true
        check_wildcards: true
        auto_fix: true
    - action: uniquify
      kwargs:
        files:
          - src/blocklist/not-content-farms.txt
          - src/blocklist/content-farms.txt
          - src/blocklist/nearly-content-farms.txt
          - src/blocklist/extra-content-farms.txt
          - src/blocklist/bad-cloners.txt
          - src/blocklist/sns-content-farms.txt
        auto_fix_excludes:
          - src/blocklist/not-content-farms.txt
        check_subdomains: true
        check_wildcards: true
        cross_files: true
        auto_fix: true

  # aggregate sources, tidy, and exclude certain exact entries
  aggregate: &tasks_aggregate
    - action: aggregate
    - action: lint
      kwargs:
        files:
          - src/aggregations/
        auto_fix: true
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/aggregations/content-farms/
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/aggregations/extra-content-farms/
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/aggregations/bad-cloners/
    - action: uniquify
      kwargs:
        <<: *exclude_non_content_farms
        files:
          - src/blocklist/not-content-farms.txt
          - src/aggregations/scam-sites/

  # shortcut
  a: *tasks_aggregate

aggregate:
  - name: xxcnxx
    homepage: https://github.com/mxt305/smashXxcnxx
    source: https://raw.githubusercontent.com/mxt305/smashXxcnxx/main/filters/xxcnxx-list.json
    dest: src/aggregations/content-farms/xxcnxx-list.txt
    type: domains_json
  - name: spamdex
    homepage: https://github.com/elliotwutingfeng/SpamdexingSites
    source: https://raw.githubusercontent.com/elliotwutingfeng/SpamdexingSites/main/blocklist.txt
    dest: src/aggregations/content-farms/spamdex.txt
    type: domains_txt
  # - name: penzai
    # homepage: https://github.com/wdmpa/content-farm-list
    # source: https://raw.githubusercontent.com/wdmpa/content-farm-list/main/domains/spam/g.penzai.com.txt
    # dest: src/aggregations/content-farms/g.penzai.com.txt
    # type: ublacklist
  - name: cxyzjd
    homepage: https://github.com/wdmpa/content-farm-list
    source: https://raw.githubusercontent.com/wdmpa/content-farm-list/main/domains/spam/cxyzjd.txt
    dest: src/aggregations/content-farms/cxyzjd.txt
    type: ublacklist
  - name: ksou
    homepage: https://github.com/wdmpa/content-farm-list
    source: https://raw.githubusercontent.com/wdmpa/content-farm-list/main/domains/spam/ksou.cc.txt
    dest: src/aggregations/content-farms/ksou.cc.txt
    type: ublacklist
  - name: www6532033
    homepage: https://github.com/wdmpa/content-farm-list
    source: https://raw.githubusercontent.com/wdmpa/content-farm-list/main/domains/spam/www.6532033.com.txt
    dest: src/aggregations/content-farms/www.6532033.com.txt
    type: ublacklist
  - name: ublSoT
    homepage: https://github.com/arosh/ublacklist-stackoverflow-translation
    source: https://raw.githubusercontent.com/arosh/ublacklist-stackoverflow-translation/master/uBlacklist.txt
    dest: src/aggregations/bad-cloners/ublacklist-stackoverflow-translation.txt
    type: ublacklist
  - name: ublGhT
    homepage: https://github.com/arosh/ublacklist-github-translation
    source: https://raw.githubusercontent.com/arosh/ublacklist-github-translation/master/uBlacklist.txt
    dest: src/aggregations/bad-cloners/ublacklist-github-translation.txt
    type: ublacklist
  - name: wdmpaMtSo
    homepage: https://github.com/wdmpa/content-farm-list
    source: https://raw.githubusercontent.com/wdmpa/content-farm-list/main/domains/machine-translated/stackoverflow.txt
    dest: src/aggregations/bad-cloners/wdmpa-machine-translated-stackoverflow.txt
    type: ublacklist
  - name: GHHbD
    homepage: https://github.com/cobaltdisco/Google-Chinese-Results-Blocklist
    source: https://raw.githubusercontent.com/cobaltdisco/Google-Chinese-Results-Blocklist/master/GHHbD_perma_ban_list.txt
    dest: src/aggregations/extra-content-farms/google-chinese-results-blocklist.txt
    type: domains_txt
  - name: gyli
    homepage: https://github.com/gyli/Blocklist
    source: https://raw.githubusercontent.com/gyli/Blocklist/master/BLOCKLIST_uBlacklist
    dest: src/aggregations/extra-content-farms/gyli.txt
    type: ublacklist
  - name: gyli
    homepage: https://github.com/gyli/Blocklist
    source: https://raw.githubusercontent.com/gyli/Blocklist/master/BLOCKLIST_uBlacklist
    dest: src/aggregations/extra-content-farms/gyli.txt
    type: ublacklist
  - name: nonpnt
    homepage: https://github.com/nonPointer/uBlacklist-Subscription
    source: https://raw.githubusercontent.com/nonPointer/uBlacklist-Subscription/master/blacklist.txt
    dest: src/aggregations/extra-content-farms/non-pointer.txt
    type: ublacklist
  - name: scyrte
    homepage: https://github.com/scyrte/uBlacklist-Subscription
    source: https://raw.githubusercontent.com/scyrte/uBlacklist-Subscription/master/blacklist.txt
    dest: src/aggregations/extra-content-farms/scyrte.txt
    type: ublacklist
  - name: diveng
    homepage: https://github.com/DivineEngine/uBlacklist
    source: https://raw.githubusercontent.com/DivineEngine/uBlacklist/master/blacklist.txt
    dest: src/aggregations/extra-content-farms/diveng.txt
    type: ublacklist
  - name: yesil
    homepage: https://github.com/YeSilin/uBlacklist
    source: https://raw.githubusercontent.com/YeSilin/uBlacklist/master/list.txt
    dest: src/aggregations/extra-content-farms/yesil.txt
    type: ublacklist
  - name: TWNICscams
    homepage: https://data.gov.tw/dataset/165027
    source: https://www-api.moda.gov.tw/OpenData/Files/5791
    dest: src/aggregations/scam-sites/twnicscams.txt
    type: json_twnicscams
  - name: 165jtz
    homepage: https://data.gov.tw/dataset/160055
    source: https://data.moi.gov.tw/MoiOD/System/DownloadFile.aspx?DATA=3BB8E3CE-8223-43AF-B1AB-5824FA889883
    dest: src/aggregations/scam-sites/165jtz.txt
    type: csv_165jtz
  - name: 165line
    homepage: https://data.gov.tw/dataset/78432
    source: https://data.moi.gov.tw/MoiOD/System/DownloadFile.aspx?DATA=7F6BE616-8CE6-449E-8620-5F627C22AA0D
    dest: src/aggregations/scam-sites/165line.txt
    type: csv_165line

build:
  - source:
      - src/blocklist/content-farms.txt
      - src/aggregations/content-farms/
    publish: docs/files/blocklist/content-farms.txt
    data:
      headers: |
        Title: Content Farm Filters
        Description: Filter for general content farms, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/content-farms.txt
      schemes: &content_farms_schemes
        domain-part:
          value: /https?://(?:[\w-]+\.)*(?:{value})(?:\.[\w-]+)*(?=[:/?#]|$)/
          escape: regex
        domain-path:
          value: /https?://(?:[\w-]+\.)*(?:{value})(?=[/?#]|$)/
          escape: regex
        mp-path:
          value: /https?://(?:[\w-]+\.)*[\w-]+/(?:{value})$/
          escape: regex_with_wildcard_a
        mp-hosts-path:
          value: /https?://(?:[\w-]+\.)*(?:{value})$/
          escape: regex_with_wildcard_a
        mp-host-path:
          value: /https?://(?:{value})$/
          escape: regex_with_wildcard_a
        xuite: &content_farms_scheme_xuite
          value: /^https?://(?:(?:m\.)?(?:[bv]log|photo)\.xuite\.net|m\.xuite\.net/blog)/(?:{value})(?=[/?#]|$)/
          escape: regex
        udn: &content_farms_scheme_udn
          value: /^https?://(?:blog|album)\.udn\.com/(?:mobile/)?(?:{value})(?=[/?#]|$)/
          escape: regex
        pchome: &content_farms_scheme_pchome
          value: /^https?://mypaper\.(?:m\.)?pchome\.com\.tw/(?:{value})(?=[/?#]|$)/
          escape: regex

  - source: src/blocklist/nearly-content-farms.txt
    publish: docs/files/blocklist/nearly-content-farms.txt
    data:
      headers: |
        Title: Nearly Content Farm Filters
        Description: Filter for content-farm-like sites, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/nearly-content-farms.txt
      schemes: *content_farms_schemes

  - source:
      - src/blocklist/extra-content-farms.txt
      - src/aggregations/extra-content-farms/
    publish: docs/files/blocklist/extra-content-farms.txt
    data:
      headers: |
        Title: Extra Content Farm Filters
        Description: Extra filter for content-farm-like sites, mostly aggregated from other sources.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/extra-content-farms.txt
      schemes: *content_farms_schemes

  - source: src/blocklist/sns-content-farms.txt
    publish: docs/files/blocklist/sns-content-farms.txt
    data:
      headers: |
        Title: SNS Content Farm Filters
        Description: Filter for content-farm-like or related social network service (SNS) URLs, mostly in Chinese.
            This may not work well for all cases as many things cannot be fully determined by URL.
            This list is mostly regex-based and may have a negative effect on performance.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/sns-content-farms.txt
      schemes: &sns_content_farms_schemes
        facebook:
          value: /^https?://(?:(?:[\w-]+\.)?facebook\.com|fb\.(?:com|me))/(?!\w+\.php\?)(?:pg/)?(?:{value})(?=[/?#]|$)/
          escape: regex
        facebook-id:
          value: /^https?://(?:(?:[\w-]+\.)?facebook\.com|fb\.(?:com|me))/(?:(?:(?:pg/)?(?:[\w%]+-)?|profile/|people/[\w%-]+/|groups/[0-9a-z.]+/user/)(?=\d+\b)|(?:profile|permalink|story)\.php\?(?:[^&#]*&)*?id=(?=\d+(?:[&#]|$)))(?:{value})/
          escape: regex
        facebook-group:
          value: /^https?://(?:(?:[\w-]+\.)?facebook\.com|fb\.(?:com|me))/(?:groups/)?(?:{value})(?!/user/)(?=[/?#]|$)/
          escape: regex
        twitter:
          value: /^https?://(?:\w+\.)?twitter\.com/(?:{value})(?=[/?#]|$)/
          escape: regex
        youtube-handle:
          value: /^https?://(?:\w+\.)?youtube\.com/@(?:{value})(?=[/?#]|$)/
          escape: regex
        youtube-channel:
          value: /^https?://(?:\w+\.)?youtube\.com/channel/(?:{value})(?=[/?#]|$)/
          escape: regex
        youtube-custom:
          value: /^https?://(?:\w+\.)?youtube\.com/c/(?:{value})(?=[/?#]|$)/
          escape: regex
        youtube-user:
          value: /^https?://(?:\w+\.)?youtube\.com/user/(?:{value})(?=[/?#]|$)/
          escape: regex
        instagram:
          value: /^https?://(?:www\.)?instagram\.com/(?:{value})(?=[/?#]|$)/
          escape: regex
        pinterest:
          value: /^https?://(?:www\.)?pinterest(?:\.[a-z]+)+/(?:{value})(?=[/?#]|$)/
          escape: regex
        plurk:
          value: /^https?://(?:www\.)?plurk\.com/(?:m/p/)?(?:{value})(?=[/?#]|$)/
          escape: regex
        line-user:
          value: /^https?://(?:line\.me/(?:R/)?ti/p/)(?:{value})(?=[/?#]|$)/
          escape: regex
        line-page:
          value: /^https?://(?:page\.line\.me/|line\.me/(?:R/)?ti/p/@)(?:{value})(?=[/?#]|$)/
          escape: regex
        line-timeline:
          value: /^https?://timeline\.line\.me/(?:\w+?)/(?:{value})(?=[/?#]|$)/
          escape: regex
        haokan-author:
          value: /https?://(?:haokan|sv)\.baidu\.com/author/(?:{value})(?=[/?#]|$)/
          escape: regex

  - source:
      - src/blocklist/bad-cloners.txt
      - src/aggregations/bad-cloners/
    publish: docs/files/blocklist/bad-cloners.txt
    data:
      headers: |
        Title: Bad Cloners
        Description: Filter for cloner sites that are mostly free of copyright issue since the source site
            is copyleft or copyfree, but provide only trivial layout change or poor-quality bot translation
            and are thus spam-like.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/bad-cloners.txt
      schemes: *content_farms_schemes

  - source: src/blocklist/fake-news.txt
    publish: docs/files/blocklist/fake-news.txt
    data:
      headers: |
        Title: Fake News Filters
        Description: Filter for fake news sites. (For reference)
            This list is slightly organized from several sources only and is NOT actively maintained.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/fake-news.txt
      schemes: *content_farms_schemes

  - source:
      - src/blocklist/scam-sites.txt
      - src/aggregations/scam-sites/
    publish: docs/files/blocklist/scam-sites.txt
    data:
      headers: |
        Title: Scam Sites Filters
        Description: Filter for scam sites. Mostly aggregrated from governmental sources, such as Ministry
            of Digital Affairs and National Police Agency of Taiwan.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist/scam-sites.txt
      schemes:
        <<: *content_farms_schemes
        <<: *sns_content_farms_schemes

  - source:
      - src/blocklist/content-farms.txt
      - src/aggregations/content-farms/
    publish: docs/files/blocklist-hosts/content-farms.txt
    type: hosts
    data:
      headers: |
        Title: Content Farm Filters
        Description: Filter for general content farms, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/content-farms.txt
      processors:
        - type: domain
          pattern: blogspot\.\*$
          replacement: blogspot.com

  - source: src/blocklist/nearly-content-farms.txt
    publish: docs/files/blocklist-hosts/nearly-content-farms.txt
    type: hosts
    data:
      headers: |
        Title: Nearly Content Farm Filters
        Description: Filter for content-farm-like sites, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/nearly-content-farms.txt

  - source:
      - src/blocklist/extra-content-farms.txt
      - src/aggregations/extra-content-farms/
    publish: docs/files/blocklist-hosts/extra-content-farms.txt
    type: hosts
    data:
      headers: |
        Title: Extra Content Farm Filters
        Description: Extra filter for content-farm-like sites, mostly aggregated from other sources.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/extra-content-farms.txt

  - source:
      - src/blocklist/bad-cloners.txt
      - src/aggregations/bad-cloners/
    publish: docs/files/blocklist-hosts/bad-cloners.txt
    type: hosts
    data:
      headers: |
        Title: Bad Cloners
        Description: Filter for cloner sites that are mostly free of copyright issue since the source site
            is copyleft or copyfree, but provide only trivial layout change or poor-quality bot translation
            and are thus spam-like.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/bad-cloners.txt

  - source: src/blocklist/fake-news.txt
    publish: docs/files/blocklist-hosts/fake-news.txt
    type: hosts
    data:
      headers: |
        Title: Fake News Filters
        Description: Filter for fake news sites. (For reference)
            This list is slightly organized from several sources only and is NOT actively maintained.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/fake-news.txt

  - source:
      - src/blocklist/scam-sites.txt
      - src/aggregations/scam-sites/
    publish: docs/files/blocklist-hosts/scam-sites.txt
    type: hosts
    data:
      headers: |
        Title: Scam Sites Filters
        Description: Filter for scam sites. Mostly aggregrated from governmental sources, such as Ministry
            of Digital Affairs and National Police Agency of Taiwan.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-hosts/scam-sites.txt

  - source:
      - src/blocklist/content-farms.txt
      - src/aggregations/content-farms/
    publish: docs/files/blocklist-ubo/content-farms.txt
    type: ubo
    data:
      headers: |
        Title: Content Farm Filters
        Description: Filter for general content farms, mostly in Chinese.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/content-farms.txt
      schemes: &content_farms_schemes_ubo
        <<: *content_farms_schemes
        domain-part:
          value: "||{value}^\n||{value}.*^$doc"
          mode: raw
        domain-path:
          value: "||{value}^$doc"
          mode: raw

  - source: src/blocklist/nearly-content-farms.txt
    publish: docs/files/blocklist-ubo/nearly-content-farms.txt
    type: ubo
    data:
      headers: |
        Title: Nearly Content Farm Filters
        Description: Filter for content-farm-like sites, mostly in Chinese.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/nearly-content-farms.txt
      schemes: *content_farms_schemes_ubo

  - source:
      - src/blocklist/extra-content-farms.txt
      - src/aggregations/extra-content-farms/
    publish: docs/files/blocklist-ubo/extra-content-farms.txt
    type: ubo
    data:
      headers: |
        Title: Extra Content Farm Filters
        Description: Extra filter for content-farm-like sites, mostly aggregated from other sources.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/extra-content-farms.txt
      schemes: *content_farms_schemes_ubo

  - source: src/blocklist/sns-content-farms.txt
    publish: docs/files/blocklist-ubo/sns-content-farms.txt
    type: ubo
    data:
      headers: |
        Title: SNS Content Farm Filters
        Description: Filter for content-farm-like or related social network service (SNS) URLs, mostly in Chinese.
            This may not work well for all cases as many things cannot be fully determined by URL.
            This list is mostly regex-based and may have a negative effect on performance.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/sns-content-farms.txt
      schemes:
        <<: *sns_content_farms_schemes

  - source:
      - src/blocklist/bad-cloners.txt
      - src/aggregations/bad-cloners/
    publish: docs/files/blocklist-ubo/bad-cloners.txt
    type: ubo
    data:
      headers: |
        Title: Bad Cloners
        Description: Filter for cloner sites that are mostly free of copyright issue since the source site
            is copyleft or copyfree, but provide only trivial layout change or poor-quality bot translation
            and are thus spam-like.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/bad-cloners.txt
      schemes: *content_farms_schemes_ubo

  - source: src/blocklist/fake-news.txt
    publish: docs/files/blocklist-ubo/fake-news.txt
    type: ubo
    data:
      headers: |
        Title: Fake News Filters
        Description: Filter for fake news sites. (For reference)
            This list is slightly organized from several sources only and is NOT actively maintained.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/fake-news.txt
      schemes: *content_farms_schemes_ubo

  - source:
      - src/blocklist/scam-sites.txt
      - src/aggregations/scam-sites/
    publish: docs/files/blocklist-ubo/scam-sites.txt
    type: ubo
    data:
      headers: |
        Title: Scam Sites Filters
        Description: Filter for scam sites. Mostly aggregrated from governmental sources, such as Ministry
            of Digital Affairs and National Police Agency of Taiwan.
        Expires: 3 days
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ubo/scam-sites.txt
      schemes:
        <<: *content_farms_schemes_ubo
        <<: *sns_content_farms_schemes

  - source:
      - src/blocklist/content-farms.txt
      - src/aggregations/content-farms/
    publish: docs/files/blocklist-ublacklist/content-farms.txt
    type: ublacklist
    data:
      headers: |
        Title: Content Farm Filters
        Description: Filter for general content farms, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/content-farms.txt
      processors: &content_farms_processors_ublacklist
        - type: domain
          pattern: ^([\w-]+)\.blogspot\.\*$
          replacement: blogspot:\1
      schemes: &content_farms_schemes_ublacklist
        <<: *content_farms_schemes
        domain-part: &grouping_regex_scheme
          escape: regex
          grouping: "|"
          max: 524288
          value: /https?://(?:[\w-]+\.)*(?:{value})(?:\.[\w-]+)*(?=[:\/?#]|$)/
        domain-path:
          value: "*://*.{value}\n*://*.{value}/*"
          mode: raw
        mp-path:
          value: '*://*/{value}'
          mode: raw
        mp-hosts-path:
          value: '*://*.{value}'
          mode: raw
        mp-host-path:
          value: '*://{value}'
          mode: raw
        blogspot:
          <<: *grouping_regex_scheme
          value: /https?://(?:[\w-]+\.)*(?:{value})\.blogspot\.(?:[\w.-]+)(?=[:\/?#]|$)/
        xuite:
          <<: [*content_farms_scheme_xuite, *grouping_regex_scheme]
        udn:
          <<: [*content_farms_scheme_udn, *grouping_regex_scheme]
        pchome:
          <<: [*content_farms_scheme_pchome, *grouping_regex_scheme]

  - source: src/blocklist/nearly-content-farms.txt
    publish: docs/files/blocklist-ublacklist/nearly-content-farms.txt
    type: ublacklist
    data:
      headers: |
        Title: Nearly Content Farm Filters
        Description: Filter for content-farm-like sites, mostly in Chinese.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/nearly-content-farms.txt
      processors: *content_farms_processors_ublacklist
      schemes: *content_farms_schemes_ublacklist

  - source:
      - src/blocklist/extra-content-farms.txt
      - src/aggregations/extra-content-farms/
    publish: docs/files/blocklist-ublacklist/extra-content-farms.txt
    type: ublacklist
    data:
      headers: |
        Title: Extra Content Farm Filters
        Description: Extra filter for content-farm-like sites, mostly aggregated from other sources.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/extra-content-farms.txt
      processors: *content_farms_processors_ublacklist
      schemes: *content_farms_schemes_ublacklist

  - source:
      - src/blocklist/bad-cloners.txt
      - src/aggregations/bad-cloners/
    publish: docs/files/blocklist-ublacklist/bad-cloners.txt
    type: ublacklist
    data:
      headers: |
        Title: Bad Cloners
        Description: Filter for cloner sites that are mostly free of copyright issue since the source site
            is copyleft or copyfree, but provide only trivial layout change or poor-quality bot translation
            and are thus spam-like.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/bad-cloners.txt
      processors: *content_farms_processors_ublacklist
      schemes: *content_farms_schemes_ublacklist

  - source: src/blocklist/fake-news.txt
    publish: docs/files/blocklist-ublacklist/fake-news.txt
    type: ublacklist
    data:
      headers: |
        Title: Fake News Filters
        Description: Filter for fake news sites. (For reference)
            This list is slightly organized from several sources only and is NOT actively maintained.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/fake-news.txt
      processors: *content_farms_processors_ublacklist
      schemes: *content_farms_schemes_ublacklist

  - source:
      - src/blocklist/scam-sites.txt
      - src/aggregations/scam-sites/
    publish: docs/files/blocklist-ublacklist/scam-sites.txt
    type: ublacklist
    data:
      headers: |
        Title: Scam Sites Filters
        Description: Filter for scam sites. Mostly aggregrated from governmental sources, such as Ministry
            of Digital Affairs and National Police Agency of Taiwan.
        Last modified: {now}
        Homepage: https://danny0838.github.io/content-farm-terminator/
        Licence: MIT License
        Source: https://danny0838.github.io/content-farm-terminator/files/blocklist-ublacklist/scam-sites.txt
      processors: *content_farms_processors_ublacklist
      schemes:
        <<: *content_farms_schemes_ublacklist
        line-page:
